<div id="wrapperDiv" class="w-1/3 m-auto">
  <form
    [formGroup]="userDetailForm"
    (ngSubmit)="onSubmit()"
    class="flex flex-col gap-2 border-2 border-gray-800 p-2 rounded-md"
  >
    <div class="flex items-center justify-center gap-4">
      <img
        *ngIf="!forCreation && currentUser"
        src="{{ currentUser.avatarUrl }}"
        width="100"
        height="100"
      />
      <div>
        <div class="flex justify-center">
          <mat-form-field
            class="example-full-width"
            appearance="fill"
            class="w-full"
          >
            <mat-label>Name</mat-label>
            <input
              matInput
              type="string"
              formControlName="name"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['name'].errors }"
              placeholder="Name of the User"
            />
            <mat-error
              *ngIf="
                submitted && f['name'].errors && f['name'].errors['required']
              "
            >
              Name is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="flex justify-center">
          <mat-form-field
            class="example-full-width"
            appearance="fill"
            class="w-full"
          >
            <mat-label>Age</mat-label>
            <input
              matInput
              type="number"
              formControlName="age"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['age'].errors }"
              placeholder="Age of the User"
            />
            <mat-error
              *ngIf="submitted && f['age'].errors && f['age'].errors['min']"
            >
              Age should not be 0
            </mat-error>
          </mat-form-field>
        </div>
        <div class="flex justify-center">
          <mat-form-field
            class="example-full-width"
            appearance="fill"
            class="w-full"
          >
            <mat-label>Email</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              class="form-control"
              [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
              placeholder="Email of the User"
            />
            <mat-error
              *ngIf="
                submitted && f['email'].errors && f['email'].errors['required']
              "
            >
              Email is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="flex justify-center">
          <mat-form-field
            class="example-full-width"
            appearance="fill"
            class="w-full"
          >
            <mat-label>Status Message</mat-label>
            <input
              matInput
              type="string"
              formControlName="statusMessage"
              class="form-control"
              [ngClass]="{
                'is-invalid': submitted && f['statusMessage'].errors
              }"
              placeholder="Status Message"
            />
            <mat-error
              *ngIf="
                submitted &&
                f['statusMessage'].errors &&
                f['statusMessage'].errors['required']
              "
            >
              Status Message is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="flex justify-center">
          <mat-form-field
            class="example-full-width"
            appearance="fill"
            class="w-full"
          >
            <mat-label>Avatar Url</mat-label>
            <input
              matInput
              type="string"
              formControlName="avatarUrl"
              class="form-control"
              placeholder="Url of user avatar"
            />
          </mat-form-field>
        </div>
        <div *ngIf="!forCreation && currentUser" class="flex justify-center">
          <span>{{ currentUser.createdAt | date:'mediumDate' }}</span>
        </div>
      </div>
    </div>
    <div class="flex justify-center">
      <mat-checkbox formControlName="isPublic">Display as Public</mat-checkbox>
    </div>
    <div class="flex justify-center gap-4">
      <button mat-raised-button color="primary" type="submit">
        {{ forCreation ? "Create" : "Update" }} User
      </button>
      <button
        *ngIf="!forCreation"
        mat-raised-button
        color="warn"
        type="button"
        (click)="deleteUser()"
      >
        Delete User
      </button>
    </div>
  </form>
</div>
